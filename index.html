<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>–û–±–ª—ñ–∫ –∑–∞–∫—É–ø—ñ–≤–µ–ª—å</title>
  <link rel="preconnect" href="https://fonts.googleapis.com"/>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin/>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet"/>
  <link rel="stylesheet" href="styles.css"/>
  <link rel="manifest" href="manifest.json"/>
</head>
<body>
<header class="app-header">
  <div class="header-content">
    <button class="back-button" id="backButton" style="display:none;">
      <i data-lucide="arrow-left"></i>
    </button>
    <h1 class="header-title" id="headerTitle">–û–±–ª—ñ–∫ –∑–∞–∫—É–ø—ñ–≤–µ–ª—å</h1>
    <button class="theme-toggle" id="themeToggle">
      <i data-lucide="moon" class="theme-icon"></i>
    </button>
  </div>
</header>

<main class="main-content">
  <div class="loading-screen" id="loadingScreen">
    <div class="loading-spinner"></div>
    <p>–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è...</p>
  </div>

  <div class="screen" id="mainScreen" style="display:none;">
    <div class="tab-content" id="homeTab">
      <div class="purchases-page">
        <div class="page-header">
          <h2>–û–±–µ—Ä—ñ—Ç—å –¥—ñ—é</h2>
          <p>–í–∏–±–µ—Ä—ñ—Ç—å —Ç–∏–ø –æ–ø–µ—Ä–∞—Ü—ñ—ó –¥–ª—è –æ–±–ª—ñ–∫—É</p>
        </div>

        <div class="categories-grid">
          <div class="category-row">
            <button class="category-card start-purchase glassmorphism" onclick="startPurchase()">
              <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="category-icon"><circle cx="8" cy="21" r="1"/><circle cx="19" cy="21" r="1"/><path d="M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12"/></svg>
              <span class="category-label">–ü–æ—á–∞—Ç–∏ –∑–∞–∫—É–ø–∫—É</span>
            </button>
          </div>
          <div class="category-row">
            <button class="category-card unloading glassmorphism" onclick="startUnloading()">
              <i data-lucide="truck" class="category-icon"></i>
              <span class="category-label">–í—ñ–¥–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è</span>
            </button>
            <button class="category-card delivery glassmorphism" onclick="startDelivery()">
              <i data-lucide="package" class="category-icon"></i>
              <span class="category-label">–î–æ—Å—Ç–∞–≤–∫–∞</span>
            </button>
          </div>
          <div class="end-day-section">
            <button class="end-day-button" onclick="showEndDayModal()">
              <i data-lucide="sunset"></i>
              <span>–ó–∞–≤–µ—Ä—à–∏—Ç–∏ –¥–µ–Ω—å</span>
            </button>
          </div>
        </div>
      </div>
    </div>

    <div class="tab-content" id="purchasesListTab" style="display:none;">
      <div class="page-header">
        <h2>–Ü—Å—Ç–æ—Ä—ñ—è –ó–∞–∫—É–ø–æ–∫</h2>
        <p id="purchasesListSummary">–©–µ –Ω–µ–º–∞—î –∑–∞–ø–∏—Å—ñ–≤</p>
      </div>
      <div class="history-page">
        <div class="history-controls">
          <button id="sendPurchasesButton" class="save-button" style="min-width:150px;flex-grow:1;">
            <i data-lucide="upload-cloud" class="button-icon"></i>
            <span class="button-spinner" style="display:none;"></span>
            <span>–í—ñ–¥–ø—Ä–∞–≤–∏—Ç–∏ –≤—Å—ñ</span>
          </button>
        </div>
        <div class="cart-items" id="purchasesListItems"></div>
        <div class="cart-empty" id="purchasesListEmpty">
          <div class="empty-icon">üõí</div>
          <p>–¢—É—Ç –±—É–¥–µ —ñ—Å—Ç–æ—Ä—ñ—è –≤–∞—à–∏—Ö –∑–∞–∫—É–ø–æ–∫</p>
        </div>
      </div>
    </div>

    <div class="tab-content" id="unloadingListTab" style="display:none;">
      <div class="page-header">
        <h2>–Ü—Å—Ç–æ—Ä—ñ—è –ü–µ—Ä–µ–º—ñ—â–µ–Ω—å</h2>
        <p id="unloadingListSummary">–©–µ –Ω–µ–º–∞—î –∑–∞–ø–∏—Å—ñ–≤</p>
      </div>
      <div class="history-page">
        <div class="history-controls">
          <button id="sendUnloadingsButton" class="save-button" style="min-width:150px;flex-grow:1;">
            <i data-lucide="upload-cloud" class="button-icon"></i>
            <span class="button-spinner" style="display:none;"></span>
            <span>–í—ñ–¥–ø—Ä–∞–≤–∏—Ç–∏ –≤—Å—ñ</span>
          </button>
        </div>
        <div class="cart-items" id="unloadingListItems"></div>
        <div class="cart-empty" id="unloadingListEmpty">
          <div class="empty-icon">üöö</div>
          <p>–¢—É—Ç –±—É–¥–µ —ñ—Å—Ç–æ—Ä—ñ—è –≤—ñ–¥–≤–∞–Ω—Ç–∞–∂–µ–Ω—å —Ç–∞ –¥–æ—Å—Ç–∞–≤–æ–∫</p>
        </div>
      </div>
    </div>

    <div class="tab-content" id="reportsTab" style="display:none;">
      <div class="page-header">
        <h2>–ó–≤—ñ—Ç–∏</h2>
        <p>–ê–Ω–∞–ª—ñ—Ç–∏–∫–∞ –≤–∞—à–∏—Ö –æ–ø–µ—Ä–∞—Ü—ñ–π</p>
      </div>
      <div class="reports-page">
        <div class="stats-grid" id="statsGrid"></div>
        <div class="chart-container">
          <h3>–í–∏—Ç—Ä–∞—Ç–∏ –∑–∞ —Ç–∏–ø–æ–º</h3>
          <canvas id="typeChart"></canvas>
        </div>
      </div>
    </div>
  </div>

  <div class="screen" id="purchaseFormScreen" style="display:none;">
    <div class="purchase-form-page">
      <div class="page-header">
        <h2 id="formTitle">–ù–æ–≤–∞ –∑–∞–∫—É–ø—ñ–≤–ª—è</h2>
        <p id="formSubtitle">–í–∫–∞–∂—ñ—Ç—å –¥–∞–Ω—ñ –ø—Ä–æ —Ç–æ–≤–∞—Ä</p>
      </div>
      <div class="form-container glassmorphism">
        <form class="purchase-form" id="purchaseForm" novalidate>
          <div class="form-group">
            <label for="productName">–ù–∞–∑–≤–∞ —Ç–æ–≤–∞—Ä—É</label>
            <input type="text" id="productName" list="productSuggestions" placeholder="–ù–∞–ø—Ä–∏–∫–ª–∞–¥: –ü–æ–º—ñ–¥–æ—Ä–∏ —á–µ—Ä–≤–æ–Ω—ñ" required>
            <datalist id="productSuggestions"></datalist>
          </div>
          <div class="form-group">
            <label for="quantity">–ö—ñ–ª—å–∫—ñ—Å—Ç—å</label>
            <input type="number" id="quantity" step="0.1" min="0" placeholder="0" required>
          </div>
          <div class="form-group">
            <label for="unit">–û–¥–∏–Ω–∏—Ü—è –≤–∏–º—ñ—Ä—É</label>
            <select id="unit" required></select>
          </div>
          <div class="form-group" id="priceGroup">
            <label for="pricePerUnit">–¶—ñ–Ω–∞ –∑–∞ –æ–¥–∏–Ω–∏—Ü—é, ‚Ç¥</label>
            <input type="number" id="pricePerUnit" step="0.01" min="0" placeholder="0.00">
          </div>
          <div class="form-group">
            <label for="location" id="locationLabel">–õ–æ–∫–∞—Ü—ñ—è</label>
            <select id="location" required></select>
          </div>
          <div class="form-group" id="customLocationGroup" style="display:none;">
            <label for="customLocation">–í–∫–∞–∂—ñ—Ç—å –ª–æ–∫–∞—Ü—ñ—é</label>
            <input type="text" id="customLocation" placeholder="–í–≤–µ–¥—ñ—Ç—å –Ω–∞–∑–≤—É –ª–æ–∫–∞—Ü—ñ—ó">
          </div>
          <div class="form-group">
            <label>–§–æ—Ç–æ —Ç–æ–≤–∞—Ä—É</label>
            <div class="photo-uploader">
              <input type="file" id="photoInput" accept="image/*" style="display:none;">
              <button type="button" class="photo-button" onclick="document.getElementById('photoInput').click()">
                <i data-lucide="camera"></i>
                <span>–î–æ–¥–∞—Ç–∏ —Ñ–æ—Ç–æ</span>
              </button>
              <div class="photo-preview" id="photoPreview" style="display:none;">
                <img id="previewImage" alt="–ü–æ–ø–µ—Ä–µ–¥–Ω—ñ–π –ø–µ—Ä–µ–≥–ª—è–¥">
                <button type="button" class="remove-photo" onclick="removePhoto()">
                  <i data-lucide="x"></i>
                </button>
              </div>
            </div>
          </div>
          <div class="total-display" id="totalGroup">
            <span id="totalAmount">0.00 ‚Ç¥</span>
          </div>
          <button type="submit" class="save-button" id="saveButton">
            <i data-lucide="save" class="button-icon"></i>
            <span class="button-spinner" style="display:none;"></span>
            <span id="saveButtonText">–ó–±–µ—Ä–µ–≥—Ç–∏ –ª–æ–∫–∞–ª—å–Ω–æ</span>
          </button>
        </form>
      </div>
    </div>
  </div>
</main>

<nav class="bottom-navigation" id="bottomNavigation">
  <button class="nav-button active" data-tab="home" onclick="switchTab('home')">
    <i data-lucide="home"></i>
    <span>–ì–æ–ª–æ–≤–Ω–∞</span>
  </button>
  <button class="nav-button" data-tab="purchasesList" onclick="switchTab('purchasesList')">
    <i data-lucide="shopping-cart"></i>
    <span>–ó–∞–∫—É–ø–∫–∞</span>
  </button>
  <button class="nav-button" data-tab="unloadingList" onclick="switchTab('unloadingList')">
    <i data-lucide="truck"></i>
    <span>–í—ñ–¥–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è</span>
  </button>
  <button class="nav-button" data-tab="reports" onclick="switchTab('reports')">
    <i data-lucide="pie-chart"></i>
    <span>–ó–≤—ñ—Ç–∏</span>
  </button>
</nav>

<div class="toast-container" id="toastContainer"></div>

<div class="modal-overlay" id="endDayModal">
  <div class="modal-content glassmorphism">
    <h3>–ó–∞–≤–µ—Ä—à–∏—Ç–∏ –¥–µ–Ω—å?</h3>
    <p>–Ü—Å—Ç–æ—Ä—ñ—é –æ–ø–µ—Ä–∞—Ü—ñ–π –∑–∞ –ø–æ—Ç–æ—á–Ω–∏–π –¥–µ–Ω—å –±—É–¥–µ –æ—á–∏—â–µ–Ω–æ. –í–∏ –≤–ø–µ–≤–Ω–µ–Ω—ñ?</p>
    <div class="modal-actions">
      <button class="btn-secondary" id="cancelEndDay">–°–∫–∞—Å—É–≤–∞—Ç–∏</button>
      <button class="btn-destructive" id="confirmEndDay">–ó–∞–≤–µ—Ä—à–∏—Ç–∏</button>
    </div>
  </div>
</div>

<script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="app.js" defer></script>

<style>
.modal-overlay{position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,0.5);z-index:1000;display:none;align-items:center;justify-content:center;padding:1rem;}
.modal-overlay.visible{display:flex;}
.modal-actions{display:flex;gap:1rem;margin-top:1.5rem;}
.modal-actions button{flex:1;padding:0.75rem;border-radius:0.5rem;border:none;font-weight:600;cursor:pointer;}
.btn-secondary{background:var(--muted);color:var(--muted-foreground);}
.btn-destructive{background:var(--destructive);color:var(--destructive-foreground);}
.stat-card{background:var(--card);border:1px solid var(--border);border-radius:var(--radius);padding:1.5rem;text-align:center;}
.stat-card-value{font-size:1.75rem;font-weight:700;color:var(--primary);}
.stat-card-label{font-size:0.875rem;color:var(--muted-foreground);}
.chart-container{background:var(--card);border:1px solid var(--border);border-radius:var(--radius);padding:1rem;}
.reports-page{padding:1rem;}
.stats-grid{display:grid;grid-template-columns:repeat(2,1fr);gap:1rem;margin-bottom:2rem;}
</style>
</body>
</html>
